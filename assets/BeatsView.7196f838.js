import{d as f,o as c,c as p,t as B,w as S,a as w,b as Q,F as y,r as T,n as U,u as j,e as g,f as _,g as q,h as b,v as x,i as h,j as I,k as A,l as C,m as n,p as N}from"./index.d5853ce2.js";import{L as P,a as L,_ as k,B as M}from"./BeatstoreUsage.a29d08c9.js";function R(u,o){o.forEach(s=>{u.classList.toggle(s)})}const D=f({__name:"BeatstoreArtist",props:{artist:null},emits:["selectArtist"],setup(u,{emit:o}){const s=t=>{o("selectArtist",t)};return(t,l)=>u.artist.id?(c(),p("button",{key:0,"data-test":"artist",onClick:l[0]||(l[0]=S(e=>s(u.artist.id),["prevent"])),class:"btn btn-xs from-primary to-[#C165CC] border-none text-base-100 min-w-[120px] flex-1 shadow-lg hover:brightness-95 transition-all"},B(u.artist.name),1)):(c(),w(P,{key:1,class:"btn btn-xs border-none min-w-[120px] flex-1 shadow-lg hover:bg-base-300"}))}}),F={class:"box-border w-full flex flex-wrap items-center gap-5","data-test":"artistList"},$=f({__name:"ArtistList",props:{artistList:null},emits:["selectArtist"],setup(u,{emit:o}){const s=g(),t=Q(()=>s.query.artist&&typeof s.query.artist=="string"?s.query.artist.split(",").map(e=>+e):[]),l=e=>{o("selectArtist",e)};return(e,d)=>(c(),p("ul",F,[(c(!0),p(y,null,T(u.artistList,r=>(c(),w(D,{artist:r,key:r.id,onSelectArtist:l,class:U(j(t).includes(r.id)?"bg-black":"bg-gradient-to-r")},null,8,["artist","class"]))),128))]))}}),V=f({__name:"BeatstoreArtists",emits:["updateArtistQuery"],setup(u,{emit:o}){const s=g(),t=_(s.query.artist&&typeof s.query.artist=="string"?s.query.artist.split(",").map(r=>+r):[]),l=r=>{t.value.includes(r)?t.value=t.value.filter(i=>i!==r):t.value.push(r),o("updateArtistQuery",t.value)},e=_(!0),d=_([]);return q(async()=>{d.value=(await L.get("https://s1kebeatstore-rest.herokuapp.com/api/artists/")).data.results,e.value=!1,t.value.length&&o("updateArtistQuery",t.value)}),(r,i)=>(c(),p(y,null,[b(h($,{onSelectArtist:l,"artist-list":d.value},null,8,["artist-list"]),[[x,!e.value]]),e.value?(c(),w($,{key:0,"data-test":"placeholder","artist-list":[{},{},{},{}]})):I("",!0)],64))}}),z={"data-test":"searchPanel",class:"flex justify-center box-border w-[1648px] mb-5 responsive"},O={class:"w-full flex gap-5 search"},E={class:"flex-1 flex gap-5 max-w-[440px] 1700:max-w-[300px] field"},G={class:"bpm flex-1 max-w-[120px] 1700:max-w-[80px]"},H=n("label",{for:"bpm",class:"text-left text-base text-black font-semibold mb-2 select-none"}," Bpm ",-1),J=["value","onInput"],K={class:"flex-1 max-w-[300px] 1700:max-w-[200px] field"},W=n("label",{for:"name",class:"text-left text-base text-black font-semibold mb-2 select-none"}," Name ",-1),X=["value"],Y={class:"flex-1"},Z=n("p",{class:"text-left text-base text-black font-semibold mb-[10px] select-none"}," Type ",-1),tt=f({__name:"BeatstoreSearchPanel",emits:["updateSearchQuery"],setup(u,{emit:o}){const s=g(),t=A({bpm:s.query.bpm?String(s.query.bpm):"",name:s.query.name?String(s.query.name):"",artist:[]});function l(a){t.artist=a}let e;function d(a){const m=a.target;m.value=m.value.replace(/[^\d,]/g,""),clearTimeout(e),r=setTimeout(()=>{t.bpm=m.value},500)}let r;function i(a){const m=a.target;clearTimeout(r),r=setTimeout(()=>{t.name=m.value},750)}return C(t,()=>{const a={};t.bpm&&(a.bpm=t.bpm),t.name&&(a.name=t.name),t.artist&&t.artist.length&&(a.artist=t.artist.join(",")),o("updateSearchQuery",a)}),(a,m)=>(c(),p("div",z,[n("form",O,[n("fieldset",E,[n("fieldset",G,[H,n("input",{id:"bpm","data-test":"bpmInput",type:"number",size:"3",name:"bpm",min:"1",max:"300",placeholder:"s1ke",value:t.bpm,onInput:S(d,["prevent"]),class:"w-full input input-xs border-none focus:outline-none text-black shadow-lg"},null,40,J)]),n("fieldset",K,[W,n("input",{id:"name","data-test":"nameInput",type:"text",placeholder:"beats",name:"nm",value:t.name,onInput:i,class:"w-full input input-xs border-none focus:outline-none text-black shadow-lg"},null,40,X)])]),n("fieldset",Y,[Z,h(V,{onUpdateArtistQuery:l})])])]))}});const et={class:"w-[1648px] flex justify-between items-center py-5 relative z-2 responsive"},st={class:"inline-block w-[30px]","data-test":"orderingText"},at={"data-test":"orderingDown",xmlns:"http://www.w3.org/2000/svg",class:"ionicon w-[15px]",viewBox:"0 0 512 512"},nt=n("title",null,"Chevron Down",-1),rt=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 184l144 144 144-144"},null,-1),ot=[nt,rt],lt={"data-test":"orderingUp",xmlns:"http://www.w3.org/2000/svg",class:"ionicon w-[15px]",viewBox:"0 0 512 512"},it=n("title",null,"Chevron Up",-1),ct=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M112 328l144-144 144 144"},null,-1),ut=[it,ct],dt=n("h1",{class:"text-xl font-semibold text-black text-center"},"Beats",-1),pt=f({__name:"BeatstoreSearch",emits:["search"],setup(u,{emit:o}){const s=g(),t=_(!1),l=i=>{const a=i.target;t.value=!t.value,R(a,["bg-white","bg-black","text-black","text-white","hover:bg-white","hover:bg-black"])},e=A({ordering:s.query.ordering?String(s.query.ordering):"-id"}),d=()=>{e.ordering==="-id"?e.ordering="id":e.ordering="-id",r(e)},r=i=>{"bpm"in i||delete e.bpm,"name"in i||delete e.name,"artist"in i||delete e.artist,Object.assign(e,i),o("search",`?${new URLSearchParams(e).toString()}`)};return(i,a)=>(c(),p(y,null,[n("div",et,[n("button",{"data-test":"orderingButton",onClick:d,class:"btn w-[70px] gap-1 border-none bg-base-100 text-black btn-xs hover:bg-base-100 shadow-lg"},[n("span",st,B(e.ordering==="-id"?"New":"Old"),1),b((c(),p("svg",at,ot,512)),[[x,e.ordering==="-id"]]),b((c(),p("svg",lt,ut,512)),[[x,e.ordering==="id"]])]),dt,n("button",{"data-test":"searchButton",class:"btn border-none bg-white text-black btn-xs hover:bg-white shadow-md hover:brightness-95 transition-all",onClick:l}," Filters ")]),b(h(tt,{onUpdateSearchQuery:r},null,512),[[x,t.value]])],64))}});const mt={class:"flex-1 flex flex-col items-center pb-[50px] min-h-[calc(100vh-90px)] select-none"},ht=f({__name:"BeatstoreBeats",setup(u){const o=N(),s=g(),t=_(!0),l=_(""),e=_([]),d=async(a,m)=>{t.value=!0;const v=(await L.get(a)).data;m?e.value.push(...v.results):e.value=[...v.results],l.value=v.next,setTimeout(()=>t.value=!1,250)},r=async a=>{o.push(`/beats${a}`)},i=()=>{d(l.value,!0)};return C(()=>s.query,()=>{const a=s.query;d(`https://s1kebeatstore-rest.herokuapp.com/api/beats/?${new URLSearchParams(a).toString()}`)}),q(()=>{const a=s.query;d(`https://s1kebeatstore-rest.herokuapp.com/api/beats/?${new URLSearchParams(a).toString()}`)}),(a,m)=>(c(),p("section",mt,[h(pt,{onSearch:r}),b(h(k,{class:"flex-1",list:e.value},null,8,["list"]),[[x,!t.value]]),b(h(k,{"data-test":"placeholderList",class:"flex-1",list:[{}]},null,512),[[x,t.value]]),b(n("button",{"data-test":"loadmoreButton",onClick:i,class:"btn bg-black text-white hover:bg-black btn-xs shadow-lg hover:brightness-95 transition-all mt-5"}," Load more ",512),[[x,l.value]])]))}}),_t={class:"flex-1 flex flex-col items-center pb-[50px] min-h-[calc(100vh-90px)] select-none"},ft=f({__name:"BeatsView",setup(u){return(o,s)=>(c(),p("div",null,[n("section",_t,[h(ht)]),h(M)]))}});export{ft as default};
